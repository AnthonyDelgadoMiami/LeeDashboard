<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emily's Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link th:href="@{/css/index.css}" rel="stylesheet">
  <link th:href="@{/css/header.css}" rel="stylesheet">
</head>
<body>

<div th:replace="~{fragments/header :: header}"></div>

<div class="container mt-4">
  <h1>Welcome, Lee ❤️</h1>

  <div class="p-3 mb-2 bg-secondary bg-gradient text-white">
    Welcome mi amor, I've made this webapp to practice springboot, this here is her dashboard, I want you to take a look around and see what I've been working on
    <br /><br />
    This here is your dashboard, some basic information, reminders and alike, hopefully you look around before moving on,
    <span style="cursor: pointer;" onclick="window.location.href='/secret'">you'll never know what you find</span>
    <br /><br />
    yes, I Love and Miss you
  </div>

  <!-- Reminders Section -->
  <div class="card mt-3 border-info">
    <div class="card-header bg-info bg-opacity-25">
      <h5 class="card-title mb-0">💭 Reminder</h5>
    </div>
    <div class="card-body bg-info bg-opacity-10">
      <p class="card-text fst-italic fs-5" th:text="${dailyReminder}"></p>
      <small class="text-muted" th:text="'(' + ${T(java.time.LocalDate).now().getDayOfWeek().toString().toLowerCase()} + ' ' + ${T(java.time.LocalTime).now().format(T(java.time.format.DateTimeFormatter).ofPattern('hh:mm a'))} + ')'"></small>
    </div>
  </div>

  <div class="card mt-3">
    <div class="card-body">
      <h5 class="card-title">Countdown to Our Anniversary</h5>
      <p class=""><strong>Our anniversary is May 23rd</strong></p>
      <p class="card-text" th:text="'Only ' + ${daysUntilAnniversary} + ' days left!'"></p>
    </div>
  </div>

  <!-- Real Weather Widget -->
  <div class="card mt-3" th:if="${weather != null}">
    <div class="card-body">
      <h5 class="card-title">Current Weather</h5>
      <p>
        <span th:text="${weather.getWeatherEmoji()}"></span>
        <span th:text="${weather.temperature + '°C'}"></span>
        | Wind: <span th:text="${weather.windSpeed + ' km/h'}"></span>
      </p>
      <small class="text-muted">Location: Your House</small>
    </div>
  </div>

  <!-- Today's Events Section -->
  <div class="card mt-3 border-warning">
    <div class="card-header bg-warning bg-opacity-25 d-flex justify-content-between align-items-center">
      <h5 class="card-title mb-0">📅 Today's Events</h5>
      <span class="badge bg-warning" th:text="${todaysEvents.size()} + ' event(s)'"></span>
    </div>
    <div class="card-body bg-warning bg-opacity-10">
      <div th:if="${hasEvents}">
        <div th:each="event : ${todaysEvents}" class="event-item mb-3 p-3 border rounded">
          <div class="d-flex align-items-start">
            <span class="me-3">🎯</span>
            <div class="flex-grow-1">
              <h6 class="mb-1 fw-bold" th:text="${event.name}">Event Name</h6>
              <p class="mb-0 text-muted small" th:if="${event.description}" th:text="${event.description}">Event description</p>
              <p class="mb-0 text-muted small fst-italic" th:unless="${event.description}">No description provided</p>
            </div>
          </div>
        </div>
      </div>
      <div th:unless="${hasEvents}">
        <div class="text-center py-3">
          <span class="display-6">📅</span>
          <p class="text-muted mb-2">No events scheduled for today</p>
          <small class="text-muted">Enjoy your day! ❤️</small>
        </div>
      </div>
      <div class="text-center mt-3">
        <a href="/surprises" class="btn btn-warning btn-sm">
          <span>View Full Calendar</span>
          <span>→</span>
        </a>
      </div>
    </div>
  </div>

  <div class="card mt-3">
    <div class="card-body">
      <h5 class="card-title">Our Memories</h5>
      <a href="/galleria" class="btn btn-primary">View Gallery</a>
    </div>
  </div>

  <div class="card mt-3">
    <div class="card-body">
      <h5 class="card-title">In the mood for a game?</h5>
      <a href="/interactive" class="btn btn-primary">View Interactive</a>
    </div>
  </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>